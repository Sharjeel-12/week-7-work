2025-08-24 11:12:17.268 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 11:12:17.850 +05:00 [INF] Kestrel URLs: 
2025-08-24 11:12:18.749 +05:00 [INF]  DB connectivity OK. Connected to database: MuhammadSharjeelFarzadDB
2025-08-24 11:12:18.777 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 11:12:18.991 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 11:12:18.991 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 11:12:19.133 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 11:12:19.133 +05:00 [INF] Hosting environment: Development
2025-08-24 11:12:19.134 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 11:12:19.512 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/ - -
2025-08-24 11:12:19.831 +05:00 [INF] Executing endpoint 'Fallback {*path:nonfile}'
2025-08-24 11:12:19.848 +05:00 [INF] The file //login.html was not modified
2025-08-24 11:12:19.849 +05:00 [INF] Executed endpoint 'Fallback {*path:nonfile}'
2025-08-24 11:12:19.851 +05:00 [INF] GET //login.html by anonymous -> 304 in 229 ms
2025-08-24 11:12:19.856 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/ - - - 304 - text/html 344.9295ms
2025-08-24 11:12:19.866 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 11:12:19.866 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api.js - -
2025-08-24 11:12:19.866 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/styles.css - -
2025-08-24 11:12:19.866 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 11:12:19.916 +05:00 [INF] The file /styles.css was not modified
2025-08-24 11:12:19.916 +05:00 [INF] The file /api.js was not modified
2025-08-24 11:12:19.917 +05:00 [INF] GET /api.js by anonymous -> 304 in 13 ms
2025-08-24 11:12:19.917 +05:00 [INF] GET /styles.css by anonymous -> 304 in 13 ms
2025-08-24 11:12:19.918 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api.js - - - 304 - text/javascript 51.9429ms
2025-08-24 11:12:19.918 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/styles.css - - - 304 - text/css 51.9464ms
2025-08-24 11:12:19.927 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 60.9062ms
2025-08-24 11:12:19.976 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 109.8550ms
2025-08-24 11:12:19.991 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/favicon.ico - -
2025-08-24 11:12:19.993 +05:00 [INF] GET /favicon.ico by anonymous -> 404 in 2 ms
2025-08-24 11:12:19.993 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/favicon.ico - - - 404 0 - 2.6740ms
2025-08-24 11:12:27.437 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 11:12:27.484 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 43 ms
2025-08-24 11:12:27.484 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 47.5022ms
2025-08-24 11:12:27.487 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 11:12:27.488 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 1.0165ms
2025-08-24 11:12:27.491 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 11:12:27.502 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.8241ms
2025-08-24 11:12:27.604 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 11:12:27.614 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 9 ms
2025-08-24 11:12:27.614 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 9.7241ms
2025-08-24 11:13:10.558 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 11:13:10.570 +05:00 [INF] CORS policy execution successful.
2025-08-24 11:13:10.573 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 11:13:10.596 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 11:13:10.666 +05:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-24 11:13:10.671 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 73.4524ms
2025-08-24 11:13:10.671 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 11:13:10.671 +05:00 [INF] POST /api/Auth/login by anonymous -> 400 in 103 ms
2025-08-24 11:13:10.672 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 400 - application/json;+charset=utf-8 113.3051ms
2025-08-24 11:13:31.123 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 11:13:31.125 +05:00 [INF] CORS policy execution successful.
2025-08-24 11:13:31.125 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 11:13:31.126 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 11:13:31.412 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 11:13:31.414 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 288.069ms
2025-08-24 11:13:31.414 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 11:13:31.415 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 289 ms
2025-08-24 11:13:31.415 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 291.8239ms
2025-08-24 11:14:05.246 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Patients - -
2025-08-24 11:14:05.247 +05:00 [INF] CORS policy execution successful.
2025-08-24 11:14:05.254 +05:00 [INF] OPTIONS /api/Patients by anonymous -> 204 in 7 ms
2025-08-24 11:14:05.255 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Patients - - - 204 - - 8.4734ms
2025-08-24 11:14:05.257 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Patients - -
2025-08-24 11:14:05.257 +05:00 [INF] CORS policy execution successful.
2025-08-24 11:14:05.290 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 11:14:05.294 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.PatientsController.GetAll (PatientVisitManager.Api)'
2025-08-24 11:14:05.296 +05:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Patient]] GetAll() on controller PatientVisitManager.Api.Controllers.PatientsController (PatientVisitManager.Api).
2025-08-24 11:14:05.305 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Patient, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 11:14:05.308 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.PatientsController.GetAll (PatientVisitManager.Api) in 11.3465ms
2025-08-24 11:14:05.308 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.PatientsController.GetAll (PatientVisitManager.Api)'
2025-08-24 11:14:05.308 +05:00 [INF] GET /api/Patients by null -> 200 in 50 ms
2025-08-24 11:14:05.308 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Patients - - - 200 - application/json;+charset=utf-8 50.8583ms
2025-08-24 12:03:38.166 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:03:38.171 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:03:38.173 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 6 ms
2025-08-24 12:03:38.173 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 7.7344ms
2025-08-24 12:03:38.175 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:03:38.176 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:03:38.177 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:03:38.179 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:03:38.181 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:03:38.233 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:03:38.235 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 53.304ms
2025-08-24 12:03:38.235 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:03:38.235 +05:00 [INF] GET /api/Doctors by null -> 200 in 59 ms
2025-08-24 12:03:38.235 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 60.0208ms
2025-08-24 12:04:08.247 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:08.247 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:08.247 +05:00 [INF] OPTIONS /api/Doctors/20 by anonymous -> 204 in 0 ms
2025-08-24 12:04:08.247 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - - - 204 - - 0.4017ms
2025-08-24 12:04:08.249 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:08.249 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:08.249 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:08.251 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:08.254 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:08.378 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 123.5482ms
2025-08-24 12:04:08.379 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:08.426 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:08.481 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 232 ms
2025-08-24 12:04:08.481 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 232.6760ms
2025-08-24 12:04:17.782 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:17.783 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:17.783 +05:00 [INF] OPTIONS /api/Doctors/20 by anonymous -> 204 in 0 ms
2025-08-24 12:04:17.783 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - - - 204 - - 0.4478ms
2025-08-24 12:04:17.784 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:17.785 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:17.785 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:17.785 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:17.785 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:17.810 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 24.6159ms
2025-08-24 12:04:17.810 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:17.840 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:17.842 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 57 ms
2025-08-24 12:04:17.842 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 57.5543ms
2025-08-24 12:04:19.319 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:19.319 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:19.319 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:19.319 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:19.319 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:19.344 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 24.9562ms
2025-08-24 12:04:19.345 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:19.374 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:19.375 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 56 ms
2025-08-24 12:04:19.375 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 56.2094ms
2025-08-24 12:04:19.862 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:19.863 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:19.863 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:19.863 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:19.863 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:19.887 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 23.4971ms
2025-08-24 12:04:19.887 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:19.915 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:19.916 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 53 ms
2025-08-24 12:04:19.916 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 54.0052ms
2025-08-24 12:04:20.254 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:20.254 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:20.255 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:20.255 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.255 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:20.278 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 22.8481ms
2025-08-24 12:04:20.278 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.308 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:20.310 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 55 ms
2025-08-24 12:04:20.310 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 55.3850ms
2025-08-24 12:04:20.550 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:20.551 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:20.551 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:20.551 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.551 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:20.574 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 23.0773ms
2025-08-24 12:04:20.575 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.604 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:20.604 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 53 ms
2025-08-24 12:04:20.605 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 54.2258ms
2025-08-24 12:04:20.758 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:20.758 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:20.758 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:20.759 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.759 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:20.782 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 23.4791ms
2025-08-24 12:04:20.782 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.813 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:20.814 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 55 ms
2025-08-24 12:04:20.814 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 56.0141ms
2025-08-24 12:04:20.918 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:20.918 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:20.918 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:20.919 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.919 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:20.942 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 23.1139ms
2025-08-24 12:04:20.942 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:20.971 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:20.972 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 53 ms
2025-08-24 12:04:20.972 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 53.9608ms
2025-08-24 12:04:21.102 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:21.102 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:21.103 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:21.103 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.103 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:21.127 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 23.9297ms
2025-08-24 12:04:21.127 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.157 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:21.158 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 55 ms
2025-08-24 12:04:21.158 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 55.8670ms
2025-08-24 12:04:21.278 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:21.278 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:21.279 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:21.279 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.279 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:21.300 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 21.4881ms
2025-08-24 12:04:21.301 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.329 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:21.330 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 51 ms
2025-08-24 12:04:21.330 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 51.8233ms
2025-08-24 12:04:21.454 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:21.454 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:21.454 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:21.455 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.455 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:21.479 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 24.0903ms
2025-08-24 12:04:21.479 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.508 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:21.509 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 54 ms
2025-08-24 12:04:21.509 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 55.0502ms
2025-08-24 12:04:21.653 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:04:21.654 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:04:21.654 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:04:21.654 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.654 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:04:21.677 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 22.4025ms
2025-08-24 12:04:21.677 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:04:21.707 +05:00 [ERR] Unhandled exception on /api/Doctors/20
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'loggerID', table 'MuhammadSharjeelFarzadDB.dbo.loggers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.ActivityLogRepository.LogAsync(String userEmail, String description) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\ActivityLogRepository.cs:line 22
   at PatientVisitManager.Api.Controllers.DoctorsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:04:21.708 +05:00 [INF] DELETE /api/Doctors/20 by null -> 500 in 54 ms
2025-08-24 12:04:21.708 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 500 - application/json;+charset=utf-8 54.6973ms
2025-08-24 12:05:14.976 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:05:14.977 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:14.977 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:05:14.977 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 0.4246ms
2025-08-24 12:05:14.978 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:05:14.978 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:14.978 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:05:14.979 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:14.979 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:05:14.983 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:05:14.985 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 6.5927ms
2025-08-24 12:05:14.987 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:14.987 +05:00 [INF] GET /api/Doctors by null -> 200 in 9 ms
2025-08-24 12:05:14.988 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 9.5029ms
2025-08-24 12:05:54.240 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:05:54.240 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:54.240 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:05:54.242 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 1.8230ms
2025-08-24 12:05:54.246 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:05:54.246 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:05:54.249 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:54.249 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:54.249 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:05:54.249 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 2.9151ms
2025-08-24 12:05:54.249 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:05:54.249 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:54.249 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:05:54.251 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:05:54.251 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 1.9783ms
2025-08-24 12:05:54.252 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:54.252 +05:00 [INF] GET /api/Doctors by null -> 200 in 2 ms
2025-08-24 12:05:54.252 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 5.5060ms
2025-08-24 12:05:54.253 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:05:54.253 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:54.253 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:05:54.254 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:54.254 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:05:54.256 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:05:54.256 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 2.0736ms
2025-08-24 12:05:54.256 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:54.256 +05:00 [INF] GET /api/Doctors by null -> 200 in 2 ms
2025-08-24 12:05:54.256 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 3.0999ms
2025-08-24 12:05:57.248 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:05:57.248 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:57.248 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:05:57.248 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:57.249 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:05:57.252 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:05:57.252 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 3.6351ms
2025-08-24 12:05:57.252 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:57.252 +05:00 [INF] GET /api/Doctors by null -> 200 in 4 ms
2025-08-24 12:05:57.252 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 4.8954ms
2025-08-24 12:05:57.254 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:05:57.255 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:05:57.255 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:05:57.255 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:57.255 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:05:57.257 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:05:57.257 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 2.1663ms
2025-08-24 12:05:57.257 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:05:57.257 +05:00 [INF] GET /api/Doctors by null -> 200 in 2 ms
2025-08-24 12:05:57.257 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 3.1205ms
2025-08-24 12:06:20.959 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:06:20.959 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:06:20.959 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:06:20.960 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 1.3999ms
2025-08-24 12:06:20.964 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:06:20.966 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:06:20.966 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:06:20.966 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:06:20.966 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:06:20.968 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:06:20.968 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 2.0361ms
2025-08-24 12:06:20.968 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:06:20.968 +05:00 [INF] GET /api/Doctors by null -> 200 in 4 ms
2025-08-24 12:06:20.968 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 4.6297ms
2025-08-24 12:06:54.767 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:06:54.768 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:06:54.769 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 1 ms
2025-08-24 12:06:54.769 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 1.8508ms
2025-08-24 12:06:54.772 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Doctors application/json 146
2025-08-24 12:06:54.774 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:06:54.774 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:06:54.774 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api)'
2025-08-24 12:06:54.777 +05:00 [INF] Route matched with {action = "Create", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateDoctorDto) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:06:54.821 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api) in 43.9918ms
2025-08-24 12:06:54.821 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api)'
2025-08-24 12:06:54.855 +05:00 [ERR] Unhandled exception on /api/Doctors
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'doctorID', table 'MuhammadSharjeelFarzadDB.dbo.doctors'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.DoctorRepository.CreateAsync(Doctor d) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\DoctorRepository.cs:line 49
   at PatientVisitManager.Api.Controllers.DoctorsController.Create(CreateDoctorDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\DoctorsController.cs:line 29
   at lambda_method43(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:2b26a553-a7cd-444c-9639-a2881497ce8d
Error Number:515,State:2,Class:16
2025-08-24 12:06:54.856 +05:00 [INF] POST /api/Doctors by null -> 500 in 83 ms
2025-08-24 12:06:54.856 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Doctors application/json 146 - 500 - application/json;+charset=utf-8 83.8133ms
2025-08-24 12:07:07.457 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:07:07.457 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:07:07.457 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:07:07.457 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 0.4249ms
2025-08-24 12:07:07.459 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:07:07.459 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:07:07.459 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:07:07.459 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:07:07.460 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:07:07.462 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:07:07.463 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 2.9513ms
2025-08-24 12:07:07.463 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:07:07.463 +05:00 [INF] GET /api/Doctors by null -> 200 in 3 ms
2025-08-24 12:07:07.463 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 4.0009ms
2025-08-24 12:13:30.620 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 12:13:30.749 +05:00 [INF] Kestrel URLs: 
2025-08-24 12:13:31.014 +05:00 [INF]  DB connectivity OK. Connected to database: MuhammadSharjeelFarzadDB
2025-08-24 12:13:31.037 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 12:13:31.160 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 12:13:31.160 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 12:13:31.217 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 12:13:31.218 +05:00 [INF] Hosting environment: Development
2025-08-24 12:13:31.218 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 12:13:31.727 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 12:13:31.727 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 12:13:31.752 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 24.8334ms
2025-08-24 12:13:31.782 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.2531ms
2025-08-24 12:13:38.106 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 12:13:38.226 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 50 ms
2025-08-24 12:13:38.228 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 122.1301ms
2025-08-24 12:13:38.240 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 12:13:38.241 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 12:13:38.243 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 2.3852ms
2025-08-24 12:13:38.264 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.6334ms
2025-08-24 12:13:38.344 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 12:13:38.354 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 9 ms
2025-08-24 12:13:38.354 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 10.7196ms
2025-08-24 12:14:26.360 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 12:14:26.372 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:14:26.393 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 12:14:26.407 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 12:14:26.590 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 12:14:26.594 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 185.3191ms
2025-08-24 12:14:26.594 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 12:14:26.595 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 225 ms
2025-08-24 12:14:26.595 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 235.1815ms
2025-08-24 12:15:18.840 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:15:18.848 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:15:18.849 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 4 ms
2025-08-24 12:15:18.849 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 9.3574ms
2025-08-24 12:15:18.851 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 12:15:18.852 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:15:18.881 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:15:18.885 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:15:18.887 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:15:18.921 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 12:15:18.924 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 36.7813ms
2025-08-24 12:15:18.924 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 12:15:18.924 +05:00 [INF] GET /api/Doctors by null -> 200 in 72 ms
2025-08-24 12:15:18.924 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 72.8993ms
2025-08-24 12:15:54.384 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 12:15:54.384 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:15:54.384 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 12:15:54.385 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 0.7390ms
2025-08-24 12:15:54.386 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Doctors application/json 148
2025-08-24 12:15:54.386 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:15:54.388 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:15:54.389 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api)'
2025-08-24 12:15:54.391 +05:00 [INF] Route matched with {action = "Create", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateDoctorDto) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:15:54.411 +05:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-24 12:15:54.429 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api) in 37.6262ms
2025-08-24 12:15:54.429 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Create (PatientVisitManager.Api)'
2025-08-24 12:15:54.429 +05:00 [INF] POST /api/Doctors by null -> 201 in 43 ms
2025-08-24 12:15:54.429 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Doctors application/json 148 - 201 - application/json;+charset=utf-8 43.3146ms
2025-08-24 12:16:01.599 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:16:01.599 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:16:01.599 +05:00 [INF] OPTIONS /api/Doctors/20 by anonymous -> 204 in 0 ms
2025-08-24 12:16:01.599 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/20 - - - 204 - - 0.3273ms
2025-08-24 12:16:01.601 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - -
2025-08-24 12:16:01.601 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:16:01.601 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:16:01.602 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:16:01.604 +05:00 [INF] Route matched with {action = "Delete", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:16:01.613 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 12:16:01.613 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api) in 9.0638ms
2025-08-24 12:16:01.613 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Delete (PatientVisitManager.Api)'
2025-08-24 12:16:01.613 +05:00 [INF] DELETE /api/Doctors/20 by null -> 204 in 12 ms
2025-08-24 12:16:01.613 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Doctors/20 - - - 204 - - 12.8082ms
2025-08-24 12:16:17.584 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/19 - -
2025-08-24 12:16:17.584 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:16:17.585 +05:00 [INF] OPTIONS /api/Doctors/19 by anonymous -> 204 in 0 ms
2025-08-24 12:16:17.585 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/19 - - - 204 - - 0.2339ms
2025-08-24 12:16:17.586 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Doctors/19 application/json 181
2025-08-24 12:16:17.586 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:16:17.587 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:16:17.587 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:16:17.590 +05:00 [INF] Route matched with {action = "Update", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateDoctorDto) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:16:17.619 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 12:16:17.619 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api) in 29.6004ms
2025-08-24 12:16:17.619 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:16:17.619 +05:00 [INF] PUT /api/Doctors/19 by null -> 204 in 33 ms
2025-08-24 12:16:17.620 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Doctors/19 application/json 181 - 204 - - 33.3228ms
2025-08-24 12:48:15.972 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/1 - -
2025-08-24 12:48:16.005 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:48:16.010 +05:00 [INF] OPTIONS /api/Doctors/1 by anonymous -> 204 in 35 ms
2025-08-24 12:48:16.011 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/1 - - - 204 - - 38.6956ms
2025-08-24 12:48:16.017 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Doctors/1 application/json 148
2025-08-24 12:48:16.018 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:48:16.020 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:48:16.021 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:48:16.023 +05:00 [INF] Route matched with {action = "Update", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateDoctorDto) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:48:16.074 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 12:48:16.075 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api) in 52.162ms
2025-08-24 12:48:16.075 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:48:16.075 +05:00 [INF] PUT /api/Doctors/1 by null -> 204 in 57 ms
2025-08-24 12:48:16.076 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Doctors/1 application/json 148 - 204 - - 58.2980ms
2025-08-24 12:48:36.514 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors/1 - -
2025-08-24 12:48:36.514 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:48:36.515 +05:00 [INF] OPTIONS /api/Doctors/1 by anonymous -> 204 in 0 ms
2025-08-24 12:48:36.515 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors/1 - - - 204 - - 1.5541ms
2025-08-24 12:48:36.520 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Doctors/1 application/json 148
2025-08-24 12:48:36.521 +05:00 [INF] CORS policy execution successful.
2025-08-24 12:48:36.522 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 12:48:36.522 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:48:36.523 +05:00 [INF] Route matched with {action = "Update", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateDoctorDto) on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 12:48:36.531 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 12:48:36.532 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api) in 8.9436ms
2025-08-24 12:48:36.532 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.Update (PatientVisitManager.Api)'
2025-08-24 12:48:36.532 +05:00 [INF] PUT /api/Doctors/1 by null -> 204 in 11 ms
2025-08-24 12:48:36.532 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Doctors/1 application/json 148 - 204 - - 12.2751ms
2025-08-24 15:17:52.527 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 15:17:52.531 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-24 15:17:52.536 +05:00 [WRN] JWT challenge: error=null, description=null
2025-08-24 15:17:52.537 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-24 15:17:52.538 +05:00 [INF] GET /api/Visits by anonymous -> 401 in 9 ms
2025-08-24 15:17:52.538 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 401 0 - 10.3708ms
2025-08-24 15:18:23.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 15:18:23.108 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:18:23.109 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 15:18:23.112 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:18:23.126 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 15:18:23.934 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 821.8836ms
2025-08-24 15:18:23.934 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 15:18:23.934 +05:00 [INF] GET /api/Visits by null -> 200 in 850 ms
2025-08-24 15:18:23.934 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 851.9641ms
2025-08-24 15:19:56.109 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 111
2025-08-24 15:19:56.110 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:19:56.110 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:19:56.114 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:19:56.118 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:19:57.024 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 905.9758ms
2025-08-24 15:19:57.025 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:19:57.073 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method70(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:515,State:2,Class:16
2025-08-24 15:19:57.098 +05:00 [INF] POST /api/Visits by null -> 500 in 988 ms
2025-08-24 15:19:57.098 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 111 - 500 - application/json;+charset=utf-8 988.8011ms
2025-08-24 15:20:29.263 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 116
2025-08-24 15:20:29.264 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:20:29.268 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:20:29.269 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:20:29.271 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:20:29.299 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 27.8868ms
2025-08-24 15:20:29.299 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:20:29.330 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method70(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:515,State:2,Class:16
2025-08-24 15:20:29.331 +05:00 [INF] POST /api/Visits by null -> 500 in 67 ms
2025-08-24 15:20:29.331 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 116 - 500 - application/json;+charset=utf-8 67.8235ms
2025-08-24 15:20:58.793 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits/4 - -
2025-08-24 15:20:58.795 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:20:58.795 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Get (PatientVisitManager.Api)'
2025-08-24 15:20:58.802 +05:00 [INF] Route matched with {action = "Get", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.Models.Visit]] Get(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:20:58.806 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.Models.Visit'.
2025-08-24 15:20:58.806 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Get (PatientVisitManager.Api) in 3.8834ms
2025-08-24 15:20:58.806 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Get (PatientVisitManager.Api)'
2025-08-24 15:20:58.806 +05:00 [INF] GET /api/Visits/4 by null -> 200 in 12 ms
2025-08-24 15:20:58.807 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits/4 - - - 200 - application/json;+charset=utf-8 13.2922ms
2025-08-24 15:21:31.251 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:21:31.251 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:21:31.253 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:21:31.253 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:21:31.262 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:21:31.296 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 34.2917ms
2025-08-24 15:21:31.296 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:21:31.329 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 78
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:21:31.331 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 80 ms
2025-08-24 15:21:31.332 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 80.5859ms
2025-08-24 15:22:10.977 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/3 - -
2025-08-24 15:22:10.978 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:22:10.979 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:22:10.979 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:22:10.981 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:22:11.007 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 25.8353ms
2025-08-24 15:22:11.007 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:22:11.037 +05:00 [ERR] Unhandled exception on /api/Visits/3
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__doctors__visitID__33D4B598". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.doctors", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 78
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:22:11.038 +05:00 [INF] DELETE /api/Visits/3 by null -> 500 in 60 ms
2025-08-24 15:22:11.038 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/3 - - - 500 - application/json;+charset=utf-8 60.4865ms
2025-08-24 15:23:24.676 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 15:23:24.696 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 6 ms
2025-08-24 15:23:24.696 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 20.6706ms
2025-08-24 15:23:24.707 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 15:23:24.707 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 15:23:24.708 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 0.9646ms
2025-08-24 15:23:24.720 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.3969ms
2025-08-24 15:23:24.838 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 15:23:24.846 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 7 ms
2025-08-24 15:23:24.846 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 8.1548ms
2025-08-24 15:23:33.457 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 15:23:33.458 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-24 15:23:33.458 +05:00 [WRN] JWT challenge: error=null, description=null
2025-08-24 15:23:33.458 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-24 15:23:33.458 +05:00 [INF] GET /api/Visits by anonymous -> 401 in 0 ms
2025-08-24 15:23:33.458 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 401 0 - 1.5866ms
2025-08-24 15:24:00.750 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 15:24:00.755 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:24:00.756 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:24:00.759 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 15:24:00.788 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 15:24:00.788 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 28.8577ms
2025-08-24 15:24:00.788 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:24:00.788 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 33 ms
2025-08-24 15:24:00.789 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 38.8188ms
2025-08-24 15:24:19.800 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:24:19.800 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:24:19.801 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:24:19.801 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:24:19.803 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:24:19.834 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 31.0659ms
2025-08-24 15:24:19.835 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:24:19.869 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:24:19.870 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 70 ms
2025-08-24 15:24:19.870 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 70.4815ms
2025-08-24 15:24:41.608 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:24:41.608 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:24:41.608 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:24:41.608 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:24:41.609 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:25:11.921 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 30312.8903ms
2025-08-24 15:25:11.922 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:25:11.955 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:25:11.956 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 30347 ms
2025-08-24 15:25:11.956 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 30347.6560ms
2025-08-24 15:25:45.847 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:25:47.948 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:25:47.948 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:25:47.949 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:25:47.949 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:26:02.111 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 14162.2279ms
2025-08-24 15:26:02.111 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:26:02.147 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:26:02.148 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 14472 ms
2025-08-24 15:26:02.148 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 16300.6485ms
2025-08-24 15:27:05.878 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:27:05.883 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:27:05.883 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:27:05.907 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:27:05.907 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:27:38.664 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 32756.6015ms
2025-08-24 15:27:38.664 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:27:38.696 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:27:38.697 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 32818 ms
2025-08-24 15:27:38.698 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 32819.6812ms
2025-08-24 15:27:39.531 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 15:27:39.547 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 2 ms
2025-08-24 15:27:39.547 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 16.2769ms
2025-08-24 15:27:39.561 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 15:27:39.561 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 15:27:39.566 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 4.9722ms
2025-08-24 15:27:39.584 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.1381ms
2025-08-24 15:27:39.683 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 15:27:39.694 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 10 ms
2025-08-24 15:27:39.694 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 10.7908ms
2025-08-24 15:27:47.384 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 15:27:47.385 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-24 15:27:47.385 +05:00 [WRN] JWT challenge: error=null, description=null
2025-08-24 15:27:47.385 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-24 15:27:47.385 +05:00 [INF] GET /api/Visits by anonymous -> 401 in 0 ms
2025-08-24 15:27:47.385 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 401 0 - 1.2257ms
2025-08-24 15:28:39.086 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 15:28:44.821 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:28:44.822 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:28:44.826 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 15:28:44.866 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 15:28:44.867 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 41.479ms
2025-08-24 15:28:44.867 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:28:45.592 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 431 ms
2025-08-24 15:28:46.025 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 6939.0028ms
2025-08-24 15:29:12.426 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:29:12.427 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:29:12.428 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:29:12.428 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:29:12.439 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:30:23.342 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 70902.7931ms
2025-08-24 15:30:23.342 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:30:23.378 +05:00 [ERR] Unhandled exception on /api/Visits/4
Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
ClientConnectionId:27db85af-8087-4a60-a9cd-105d788b1ba3
Error Number:547,State:0,Class:16
2025-08-24 15:30:23.379 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 70952 ms
2025-08-24 15:30:23.379 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 70953.2483ms
2025-08-24 15:45:05.838 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:45:05.842 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:45:05.842 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:45:05.843 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:45:05.844 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:45:07.766 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 1922.0304ms
2025-08-24 15:45:07.766 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:45:07.804 +05:00 [ERR] Unhandled exception on /api/Visits/4
System.InvalidOperationException: Cannot delete: visit is referenced by one or more patients.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
ClientConnectionId:2d663255-637d-481c-b9a1-0b57a81289c5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id)
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
2025-08-24 15:45:07.805 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 1963 ms
2025-08-24 15:45:07.805 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 1966.6863ms
2025-08-24 15:45:08.670 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 15:45:08.683 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 6 ms
2025-08-24 15:45:08.684 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 13.9523ms
2025-08-24 15:45:08.692 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 15:45:08.692 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 15:45:08.693 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 0.8972ms
2025-08-24 15:45:08.702 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 10.4230ms
2025-08-24 15:45:08.814 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 15:45:08.822 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 7 ms
2025-08-24 15:45:08.822 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 8.1282ms
2025-08-24 15:45:31.222 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 15:45:31.223 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:45:31.223 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:45:31.225 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 15:45:31.234 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 8.7551ms
2025-08-24 15:45:31.234 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:45:31.246 +05:00 [ERR] Unhandled exception on /api/Auth/login
System.ArgumentOutOfRangeException: Token a000000 is not valid in the scope of module System.ModuleHandle. (Parameter 'methodToken')
   at System.ModuleHandle.ResolveMethodHandleInternal(RuntimeModule module, Int32 methodToken, ReadOnlySpan`1 typeInstantiationContext, ReadOnlySpan`1 methodInstantiationContext)
   at System.ModuleHandle.ResolveMethodHandle(Int32 methodToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.RuntimeCustomAttributeData..ctor(RuntimeModule scope, MetadataToken caCtorToken, ConstArray& blob)
   at System.Reflection.RuntimeCustomAttributeData.GetCustomAttributes(RuntimeModule module, Int32 tkTarget)
   at System.Reflection.RuntimeCustomAttributeData.GetCustomAttributesInternal(RuntimeParameterInfo target)
   at System.Reflection.NullabilityInfoContext.Create(PropertyInfo propertyInfo)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ModelMetadata.InitializeTypeInformation()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadata..ctor(IModelMetadataProvider provider, ICompositeMetadataDetailsProvider detailsProvider, DefaultMetadataDetails details, DefaultModelBindingMessageProvider modelBindingMessageProvider)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadataProvider.CreateModelMetadata(DefaultMetadataDetails entry)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadataProvider.GetMetadataForProperties(Type modelType)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadata.get_Properties()
   at Microsoft.AspNetCore.Mvc.ModelBinding.ModelMetadata.CalculateRecordTypeConstructorDetails()
   at Microsoft.AspNetCore.Mvc.ModelBinding.ModelMetadata.ThrowIfRecordTypeHasValidationOnProperties()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.DefaultComplexObjectValidationStrategy.Enumerator..ctor(ModelMetadata modelMetadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.DefaultComplexObjectValidationStrategy.GetChildren(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context)
2025-08-24 15:45:31.247 +05:00 [INF] POST /api/Auth/login by anonymous -> 500 in 24 ms
2025-08-24 15:45:31.247 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 500 - application/json;+charset=utf-8 25.2376ms
2025-08-24 15:46:00.399 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 15:46:00.535 +05:00 [INF] Kestrel URLs: 
2025-08-24 15:46:00.795 +05:00 [INF]  DB connectivity OK. Connected to database: MuhammadSharjeelFarzadDB
2025-08-24 15:46:00.817 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 15:46:00.945 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 15:46:00.945 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 15:46:01.007 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 15:46:01.007 +05:00 [INF] Hosting environment: Development
2025-08-24 15:46:01.007 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 15:46:01.383 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 15:46:01.383 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 15:46:01.412 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 29.6143ms
2025-08-24 15:46:01.445 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.0123ms
2025-08-24 15:46:07.029 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 15:46:07.170 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 60 ms
2025-08-24 15:46:07.173 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 143.2964ms
2025-08-24 15:46:07.184 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 15:46:07.184 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 15:46:07.187 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 2.1775ms
2025-08-24 15:46:07.211 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.1945ms
2025-08-24 15:46:07.325 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 15:46:07.336 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 10 ms
2025-08-24 15:46:07.337 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 11.6522ms
2025-08-24 15:46:21.418 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 15:46:21.426 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:46:21.452 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:46:21.466 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 15:46:21.679 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 15:46:21.683 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 214.3491ms
2025-08-24 15:46:21.684 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 15:46:21.684 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 263 ms
2025-08-24 15:46:21.684 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 266.9080ms
2025-08-24 15:46:52.151 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:46:52.158 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:46:52.193 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:46:52.197 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:46:52.200 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:46:54.167 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 1967.4159ms
2025-08-24 15:46:54.168 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:46:54.204 +05:00 [ERR] Unhandled exception on /api/Visits/4
System.InvalidOperationException: Cannot delete: visit is referenced by one or more patients.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 80
ClientConnectionId:267320e6-12d2-41ea-96d9-4bdcd7623b70
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 84
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
2025-08-24 15:46:54.218 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 2060 ms
2025-08-24 15:46:54.218 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 2067.4618ms
2025-08-24 15:47:13.234 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/4 - -
2025-08-24 15:47:13.234 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:47:13.236 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:47:13.237 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:47:13.237 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:48:34.729 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 81491.1275ms
2025-08-24 15:48:34.729 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 15:48:34.759 +05:00 [ERR] Unhandled exception on /api/Visits/4
System.InvalidOperationException: Cannot delete: visit is referenced by one or more patients.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK__patients__visitI__30F848ED". The conflict occurred in database "MuhammadSharjeelFarzadDB", table "dbo.patients", column 'visitID'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 80
ClientConnectionId:267320e6-12d2-41ea-96d9-4bdcd7623b70
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.DeleteAsync(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 84
   at PatientVisitManager.Api.Controllers.VisitsController.Delete(Int32 id) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
2025-08-24 15:48:34.760 +05:00 [INF] DELETE /api/Visits/4 by null -> 500 in 81525 ms
2025-08-24 15:48:34.760 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/4 - - - 500 - application/json;+charset=utf-8 81526.3929ms
2025-08-24 15:49:02.231 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Visits/4 application/json 132
2025-08-24 15:49:02.231 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:49:02.231 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:49:02.237 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 15:49:02.244 +05:00 [INF] Route matched with {action = "Update", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:49:02.280 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 15:49:02.280 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api) in 36.0243ms
2025-08-24 15:49:02.280 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 15:49:02.280 +05:00 [INF] PUT /api/Visits/4 by null -> 204 in 49 ms
2025-08-24 15:49:02.280 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Visits/4 application/json 132 - 204 - - 49.5533ms
2025-08-24 15:52:30.516 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Visits/4 application/json 132
2025-08-24 15:52:30.519 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:52:30.549 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:52:30.549 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 15:52:30.549 +05:00 [INF] Route matched with {action = "Update", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:52:30.564 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 15:52:30.564 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api) in 14.4956ms
2025-08-24 15:52:30.564 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 15:52:30.564 +05:00 [INF] PUT /api/Visits/4 by null -> 204 in 47 ms
2025-08-24 15:52:30.564 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Visits/4 application/json 132 - 204 - - 47.7582ms
2025-08-24 15:54:52.820 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 116
2025-08-24 15:54:52.820 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:54:52.826 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:54:52.826 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:54:52.829 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:54:52.873 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 44.124ms
2025-08-24 15:54:52.874 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:54:52.907 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method40(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:aba8d86f-d7b8-40d3-b71a-39f1995a8014
Error Number:515,State:2,Class:16
2025-08-24 15:54:52.909 +05:00 [INF] POST /api/Visits by null -> 500 in 89 ms
2025-08-24 15:54:52.909 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 116 - 500 - application/json;+charset=utf-8 89.4483ms
2025-08-24 15:55:41.268 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 116
2025-08-24 15:55:41.269 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:55:41.270 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:55:41.270 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:55:41.270 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:56:18.660 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 37389.2819ms
2025-08-24 15:56:18.660 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:56:18.689 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method40(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:aba8d86f-d7b8-40d3-b71a-39f1995a8014
Error Number:515,State:2,Class:16
2025-08-24 15:56:18.690 +05:00 [INF] POST /api/Visits by null -> 500 in 37421 ms
2025-08-24 15:56:18.690 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 116 - 500 - application/json;+charset=utf-8 37422.3550ms
2025-08-24 15:57:04.909 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 116
2025-08-24 15:57:04.910 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:57:04.910 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:57:04.911 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:57:04.911 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:57:15.436 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 10525.2832ms
2025-08-24 15:57:15.436 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:57:15.467 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method40(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:aba8d86f-d7b8-40d3-b71a-39f1995a8014
Error Number:515,State:2,Class:16
2025-08-24 15:57:15.468 +05:00 [INF] POST /api/Visits by null -> 500 in 10557 ms
2025-08-24 15:57:15.468 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 116 - 500 - application/json;+charset=utf-8 10558.5407ms
2025-08-24 15:57:17.683 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 116
2025-08-24 15:57:17.683 +05:00 [INF] CORS policy execution successful.
2025-08-24 15:57:17.683 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 15:57:17.684 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:57:17.684 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 15:58:13.857 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 56173.3252ms
2025-08-24 15:58:13.857 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 15:58:13.887 +05:00 [ERR] Unhandled exception on /api/Visits
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'visitID', table 'MuhammadSharjeelFarzadDB.dbo.Visits'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at PatientVisitManager.Api.Repositories.Sql.VisitRepository.CreateAsync(Visit v) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Repositories\Sql\VisitRepository.cs:line 54
   at PatientVisitManager.Api.Controllers.VisitsController.Create(CreateVisitDto dto) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Controllers\VisitsController.cs:line 34
   at lambda_method40(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at PatientVisitManager.Api.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in F:\CureMD Work\New folder (2)\PatientVisitManager.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 15
ClientConnectionId:aba8d86f-d7b8-40d3-b71a-39f1995a8014
Error Number:515,State:2,Class:16
2025-08-24 15:58:13.888 +05:00 [INF] POST /api/Visits by null -> 500 in 56204 ms
2025-08-24 15:58:13.888 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 116 - 500 - application/json;+charset=utf-8 56204.7723ms
2025-08-24 16:18:23.605 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 16:18:23.785 +05:00 [INF] Kestrel URLs: 
2025-08-24 16:18:24.037 +05:00 [INF]  DB connectivity OK. Connected to database: MuhammadSharjeelFarzadDB
2025-08-24 16:18:24.061 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 16:18:24.186 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 16:18:24.186 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 16:18:24.245 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 16:18:24.245 +05:00 [INF] Hosting environment: Development
2025-08-24 16:18:24.245 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 16:18:24.739 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 16:18:24.739 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 16:18:24.764 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 25.7091ms
2025-08-24 16:18:24.794 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.9767ms
2025-08-24 16:19:44.700 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 16:19:44.813 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 16:19:44.815 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 16:19:44.815 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 2.3475ms
2025-08-24 16:19:44.828 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 46 ms
2025-08-24 16:19:44.831 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 132.9827ms
2025-08-24 16:19:44.843 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.3054ms
2025-08-24 16:19:44.874 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 16:19:44.884 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 9 ms
2025-08-24 16:19:44.884 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 10.1911ms
2025-08-24 16:20:02.121 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 16:20:02.126 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:20:02.149 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 16:20:02.164 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 16:20:02.343 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 16:20:02.347 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 180.6672ms
2025-08-24 16:20:02.347 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 16:20:02.348 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 224 ms
2025-08-24 16:20:02.348 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 227.1229ms
2025-08-24 16:20:40.456 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 133
2025-08-24 16:20:40.462 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:20:40.496 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 16:20:40.500 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 16:20:40.503 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 16:21:12.084 +05:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-24 16:21:12.119 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 31615.3232ms
2025-08-24 16:21:12.119 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 16:21:14.493 +05:00 [INF] POST /api/Visits by null -> 201 in 33297 ms
2025-08-24 16:21:14.915 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 133 - 201 - application/json;+charset=utf-8 34458.7663ms
2025-08-24 16:38:36.237 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 16:38:36.277 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:38:36.278 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 40 ms
2025-08-24 16:38:36.278 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 41.4831ms
2025-08-24 16:38:36.280 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 16:38:36.280 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:38:36.282 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 16:38:36.283 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:38:36.286 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 16:38:36.301 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 16:38:36.303 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 17.6446ms
2025-08-24 16:38:36.303 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:38:36.303 +05:00 [INF] GET /api/Doctors by null -> 200 in 23 ms
2025-08-24 16:38:36.304 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 23.3152ms
2025-08-24 16:42:09.543 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 16:42:09.545 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 16:42:09.579 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:42:09.582 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 16:42:09.588 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 16:42:09.594 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 11.8377ms
2025-08-24 16:42:09.594 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:42:09.594 +05:00 [INF] GET /api/Visits by null -> 200 in 50 ms
2025-08-24 16:42:09.595 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 51.7140ms
2025-08-24 16:50:25.423 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 16:50:25.571 +05:00 [INF] Kestrel URLs: 
2025-08-24 16:50:25.847 +05:00 [INF]  DB connectivity OK. Connected to database: MuhammadSharjeelFarzadDB
2025-08-24 16:50:25.868 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 16:50:25.996 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 16:50:25.996 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 16:50:26.053 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 16:50:26.053 +05:00 [INF] Hosting environment: Development
2025-08-24 16:50:26.053 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 16:50:26.442 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 16:50:26.442 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 16:50:26.464 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 22.0890ms
2025-08-24 16:50:26.498 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.7034ms
2025-08-24 16:50:29.693 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/index.html - -
2025-08-24 16:50:29.798 +05:00 [INF] GET /swagger/index.html by anonymous -> 200 in 43 ms
2025-08-24 16:50:29.800 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/index.html - - - 200 - text/html;charset=utf-8 106.9747ms
2025-08-24 16:50:29.803 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 16:50:29.803 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 16:50:29.804 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 1.3101ms
2025-08-24 16:50:29.820 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.7983ms
2025-08-24 16:50:29.856 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - -
2025-08-24 16:50:29.866 +05:00 [INF] GET /swagger/v1/swagger.json by anonymous -> 200 in 9 ms
2025-08-24 16:50:29.866 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 10.1154ms
2025-08-24 16:50:44.385 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60
2025-08-24 16:50:44.391 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:50:44.412 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 16:50:44.425 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PatientVisitManager.Api.DTOs.LoginResponse]] Login(PatientVisitManager.Api.DTOs.LoginRequest) on controller PatientVisitManager.Api.Controllers.AuthController (PatientVisitManager.Api).
2025-08-24 16:50:44.608 +05:00 [INF] Executing ObjectResult, writing value of type 'PatientVisitManager.Api.DTOs.LoginResponse'.
2025-08-24 16:50:44.614 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api) in 185.9054ms
2025-08-24 16:50:44.614 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.AuthController.Login (PatientVisitManager.Api)'
2025-08-24 16:50:44.615 +05:00 [INF] POST /api/Auth/login by anonymous -> 200 in 227 ms
2025-08-24 16:50:44.615 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Auth/login application/json 60 - 200 - application/json;+charset=utf-8 229.8087ms
2025-08-24 16:58:58.090 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 16:58:58.097 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:58:58.099 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 3 ms
2025-08-24 16:58:58.099 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 9.4258ms
2025-08-24 16:58:58.101 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 16:58:58.102 +05:00 [INF] CORS policy execution successful.
2025-08-24 16:58:58.153 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 16:58:58.161 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:58:58.165 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 16:58:58.193 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 16:58:58.199 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 33.187ms
2025-08-24 16:58:58.199 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 16:58:58.199 +05:00 [INF] GET /api/Doctors by null -> 200 in 97 ms
2025-08-24 16:58:58.199 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 97.8984ms
2025-08-24 17:00:28.933 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 17:00:28.933 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:00:28.933 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 17:00:28.933 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 0.5158ms
2025-08-24 17:00:28.935 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 17:00:28.935 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:00:28.937 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:00:28.938 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:00:28.939 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 17:00:28.942 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:00:28.942 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 3.4405ms
2025-08-24 17:00:28.942 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:00:28.942 +05:00 [INF] GET /api/Doctors by null -> 200 in 7 ms
2025-08-24 17:00:28.943 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 7.6163ms
2025-08-24 17:00:31.754 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 17:00:31.754 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:00:31.755 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:00:31.755 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:00:31.755 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 17:00:31.759 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:00:31.760 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 4.2903ms
2025-08-24 17:00:31.760 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:00:31.760 +05:00 [INF] GET /api/Doctors by null -> 200 in 5 ms
2025-08-24 17:00:31.760 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 6.1719ms
2025-08-24 17:01:08.237 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Doctors - -
2025-08-24 17:01:08.237 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:01:08.238 +05:00 [INF] OPTIONS /api/Doctors by anonymous -> 204 in 0 ms
2025-08-24 17:01:08.238 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Doctors - - - 204 - - 1.2376ms
2025-08-24 17:01:08.242 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Doctors - -
2025-08-24 17:01:08.244 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:01:08.244 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:01:08.245 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:01:08.245 +05:00 [INF] Route matched with {action = "GetAll", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Doctor]] GetAll() on controller PatientVisitManager.Api.Controllers.DoctorsController (PatientVisitManager.Api).
2025-08-24 17:01:08.248 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Doctor, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:01:08.249 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api) in 4.1442ms
2025-08-24 17:01:08.249 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.DoctorsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:01:08.249 +05:00 [INF] GET /api/Doctors by null -> 200 in 6 ms
2025-08-24 17:01:08.249 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Doctors - - - 200 - application/json;+charset=utf-8 7.1432ms
2025-08-24 17:01:48.772 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:01:48.773 +05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-24 17:01:48.776 +05:00 [WRN] JWT challenge: error=null, description=null
2025-08-24 17:01:48.776 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-24 17:01:48.777 +05:00 [INF] GET /api/Visits by anonymous -> 401 in 4 ms
2025-08-24 17:01:48.777 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 401 0 - 4.8757ms
2025-08-24 17:02:11.025 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:02:11.025 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:02:11.025 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:02:11.028 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:02:11.034 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:02:11.042 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 14.6243ms
2025-08-24 17:02:11.042 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:02:11.042 +05:00 [INF] GET /api/Visits by null -> 200 in 17 ms
2025-08-24 17:02:11.042 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 17.8006ms
2025-08-24 17:35:00.141 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 17:35:00.148 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:00.150 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 7 ms
2025-08-24 17:35:00.151 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 9.6421ms
2025-08-24 17:35:00.155 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:35:00.155 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:00.158 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:35:00.193 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:00.194 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:35:00.208 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:35:00.209 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 15.2825ms
2025-08-24 17:35:00.209 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:00.209 +05:00 [INF] GET /api/Visits by null -> 200 in 54 ms
2025-08-24 17:35:00.210 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 54.9373ms
2025-08-24 17:35:28.067 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits/1 - -
2025-08-24 17:35:28.068 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:28.068 +05:00 [INF] OPTIONS /api/Visits/1 by anonymous -> 204 in 0 ms
2025-08-24 17:35:28.068 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits/1 - - - 204 - - 1.7472ms
2025-08-24 17:35:28.071 +05:00 [INF] Request starting HTTP/2 PUT https://localhost:49428/api/Visits/1 application/json 127
2025-08-24 17:35:28.073 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:28.074 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:35:28.074 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 17:35:28.078 +05:00 [INF] Route matched with {action = "Update", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PatientVisitManager.Api.DTOs.UpdateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:35:28.118 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 17:35:28.118 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api) in 40.1528ms
2025-08-24 17:35:28.118 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Update (PatientVisitManager.Api)'
2025-08-24 17:35:28.118 +05:00 [INF] PUT /api/Visits/1 by null -> 204 in 45 ms
2025-08-24 17:35:28.118 +05:00 [INF] Request finished HTTP/2 PUT https://localhost:49428/api/Visits/1 application/json 127 - 204 - - 47.0086ms
2025-08-24 17:35:28.121 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 17:35:28.121 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:28.121 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 0 ms
2025-08-24 17:35:28.121 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 0.1815ms
2025-08-24 17:35:28.122 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:35:28.122 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:28.122 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:35:28.122 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:28.123 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:35:28.125 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:35:28.125 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 2.0923ms
2025-08-24 17:35:28.125 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:28.125 +05:00 [INF] GET /api/Visits by null -> 200 in 2 ms
2025-08-24 17:35:28.125 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 2.8066ms
2025-08-24 17:35:36.770 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits/40 - -
2025-08-24 17:35:36.770 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:36.770 +05:00 [INF] OPTIONS /api/Visits/40 by anonymous -> 204 in 0 ms
2025-08-24 17:35:36.770 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits/40 - - - 204 - - 0.3337ms
2025-08-24 17:35:36.772 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:49428/api/Visits/40 - -
2025-08-24 17:35:36.772 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:36.772 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:35:36.773 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 17:35:36.775 +05:00 [INF] Route matched with {action = "Delete", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:35:41.451 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-24 17:35:41.451 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api) in 4675.746ms
2025-08-24 17:35:41.451 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Delete (PatientVisitManager.Api)'
2025-08-24 17:35:44.035 +05:00 [INF] DELETE /api/Visits/40 by null -> 204 in 6543 ms
2025-08-24 17:35:44.894 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:49428/api/Visits/40 - - - 204 - - 8121.8061ms
2025-08-24 17:35:44.907 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 17:35:44.907 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:44.907 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 0 ms
2025-08-24 17:35:44.907 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 0.5244ms
2025-08-24 17:35:44.949 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:35:44.956 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:35:44.957 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:35:44.957 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:44.958 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:35:44.964 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:35:44.964 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 6.1968ms
2025-08-24 17:35:44.964 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:35:44.964 +05:00 [INF] GET /api/Visits by null -> 200 in 14 ms
2025-08-24 17:35:44.964 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 14.9523ms
2025-08-24 17:36:31.938 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 17:36:34.588 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:36:35.179 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 351 ms
2025-08-24 17:36:35.384 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 3445.1674ms
2025-08-24 17:36:35.385 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 128
2025-08-24 17:36:35.385 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:36:35.385 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:36:35.386 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 17:36:35.388 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:36:39.099 +05:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-24 17:36:39.130 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 3742.6266ms
2025-08-24 17:36:39.130 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 17:36:41.524 +05:00 [INF] POST /api/Visits by null -> 201 in 5525 ms
2025-08-24 17:36:41.902 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 128 - 201 - application/json;+charset=utf-8 6516.9639ms
2025-08-24 17:36:41.914 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 17:36:41.915 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:36:41.916 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 0 ms
2025-08-24 17:36:41.916 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 1.5196ms
2025-08-24 17:36:41.927 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 17:36:41.930 +05:00 [INF] CORS policy execution successful.
2025-08-24 17:36:41.937 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 17:36:41.937 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:36:41.938 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 17:36:41.948 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 17:36:41.981 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 43.4015ms
2025-08-24 17:36:41.981 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 17:36:41.981 +05:00 [INF] GET /api/Visits by null -> 200 in 51 ms
2025-08-24 17:36:41.982 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 54.9885ms
2025-08-24 23:51:42.907 +05:00 [INF] Starting PatientVisitManager (Environment=Development)
2025-08-24 23:51:43.055 +05:00 [INF] Kestrel URLs: 
2025-08-24 23:51:43.342 +05:00 [INF]  DB connectivity OK. Connected to database: practice_DB
2025-08-24 23:51:43.366 +05:00 [INF] User profile is available. Using 'C:\Users\wel\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-24 23:51:43.493 +05:00 [INF] Now listening on: https://localhost:49428
2025-08-24 23:51:43.493 +05:00 [INF] Now listening on: http://localhost:49429
2025-08-24 23:51:43.589 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-24 23:51:43.589 +05:00 [INF] Hosting environment: Development
2025-08-24 23:51:43.589 +05:00 [INF] Content root path: F:\CureMD Work\New folder (2)\PatientVisitManager.Api
2025-08-24 23:51:44.091 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - -
2025-08-24 23:51:44.091 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/_vs/browserLink - -
2025-08-24 23:51:44.130 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_framework/aspnetcore-browser-refresh.js - - - 200 16531 application/javascript;+charset=utf-8 37.2991ms
2025-08-24 23:51:44.155 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.6413ms
2025-08-24 23:52:19.289 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 23:52:19.316 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:52:19.319 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 7 ms
2025-08-24 23:52:19.320 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 30.9531ms
2025-08-24 23:52:19.323 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 23:52:19.326 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:52:19.479 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 23:52:19.485 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 23:52:19.496 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 23:52:19.539 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 23:52:19.555 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 56.9325ms
2025-08-24 23:52:19.555 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 23:52:19.556 +05:00 [INF] GET /api/Visits by null -> 200 in 230 ms
2025-08-24 23:52:19.557 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 233.3238ms
2025-08-24 23:53:00.691 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 23:53:00.692 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:53:00.693 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 1 ms
2025-08-24 23:53:00.693 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 2.1309ms
2025-08-24 23:53:00.695 +05:00 [INF] Request starting HTTP/2 POST https://localhost:49428/api/Visits application/json 128
2025-08-24 23:53:00.695 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:53:00.697 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 23:53:00.702 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 23:53:00.709 +05:00 [INF] Route matched with {action = "Create", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Create(PatientVisitManager.Api.DTOs.CreateVisitDto) on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 23:53:04.836 +05:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-24 23:53:04.873 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api) in 4164.1449ms
2025-08-24 23:53:04.873 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.Create (PatientVisitManager.Api)'
2025-08-24 23:53:07.615 +05:00 [INF] POST /api/Visits by null -> 201 in 6235 ms
2025-08-24 23:53:08.151 +05:00 [INF] Request finished HTTP/2 POST https://localhost:49428/api/Visits application/json 128 - 201 - application/json;+charset=utf-8 7456.1620ms
2025-08-24 23:53:08.165 +05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:49428/api/Visits - -
2025-08-24 23:53:08.166 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:53:08.166 +05:00 [INF] OPTIONS /api/Visits by anonymous -> 204 in 0 ms
2025-08-24 23:53:08.177 +05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:49428/api/Visits - - - 204 - - 11.8562ms
2025-08-24 23:53:08.178 +05:00 [INF] Request starting HTTP/2 GET https://localhost:49428/api/Visits - -
2025-08-24 23:53:08.180 +05:00 [INF] CORS policy execution successful.
2025-08-24 23:53:08.190 +05:00 [INF] JWT validated for Email=(no-email), Role=Admin
2025-08-24 23:53:08.197 +05:00 [INF] Executing endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 23:53:08.197 +05:00 [INF] Route matched with {action = "GetAll", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[PatientVisitManager.Api.Models.Visit]] GetAll() on controller PatientVisitManager.Api.Controllers.VisitsController (PatientVisitManager.Api).
2025-08-24 23:53:08.206 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[PatientVisitManager.Api.Models.Visit, PatientVisitManager.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-24 23:53:08.206 +05:00 [INF] Executed action PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api) in 4.3402ms
2025-08-24 23:53:08.206 +05:00 [INF] Executed endpoint 'PatientVisitManager.Api.Controllers.VisitsController.GetAll (PatientVisitManager.Api)'
2025-08-24 23:53:08.206 +05:00 [INF] GET /api/Visits by null -> 200 in 26 ms
2025-08-24 23:53:08.206 +05:00 [INF] Request finished HTTP/2 GET https://localhost:49428/api/Visits - - - 200 - application/json;+charset=utf-8 27.5541ms
