import{k as A,m as V,n as l,o as B,p as T,q as C,r as m,s as q,t as z,u as G,v as U,w as j}from"./chunk-MCLKDG7U.js";import{Ba as w,Da as f,Fa as v,Ga as M,Ha as y,Ia as N,Ja as i,Ka as e,La as d,M as E,Ma as _,Na as u,Oa as c,Pa as n,Qa as b,R as I,Ra as O,Sa as k,V as S,ba as P,ca as h,qa as p,ra as F}from"./chunk-U35MBERR.js";var g=(()=>{class r{constructor(t){this.http=t,this.baseUrl="http://localhost:49428/api/Patients"}getAllPatients(){return this.http.get(this.baseUrl,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}getPatientByID(t){return this.http.get(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}deletePatientByID(t){return this.http.delete(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}AddNewPatient(t){return this.http.post(this.baseUrl,t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}UpdatePatient(t,a){return this.http.put(this.baseUrl+`/${t}`,a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}static{this.\u0275fac=function(a){return new(a||r)(I(A))}}static{this.\u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function J(r,x){if(r&1){let t=_();i(0,"form",5),u("ngSubmit",function(){P(t);let o=c();return h(o.onSubmit())}),i(1,"div")(2,"label",6),n(3,"Patient ID"),e(),d(4,"br")(5,"input",7),e(),i(6,"div")(7,"label",8),n(8,"Patient Name"),e(),d(9,"br")(10,"input",9),e(),i(11,"div")(12,"label",10),n(13,"Patient Email"),e(),d(14,"br")(15,"input",11),e(),i(16,"div")(17,"label",12),n(18,"Patient Phone"),e(),d(19,"br")(20,"input",13),e(),i(21,"div")(22,"label",14),n(23,"Patient Description"),e(),d(24,"br")(25,"textarea",15),e(),i(26,"div")(27,"button",16),n(28,"Add Patient"),e(),i(29,"button",17),u("click",function(){P(t);let o=c();return h(o.deactivateForm())}),n(30,"cancel"),e()()()}if(r&2){let t=c();f("formGroup",t.addPatientForm),p(27),f("disabled",!t.addPatientForm.valid)}}function K(r,x){if(r&1){let t=_();i(0,"form",18),u("ngSubmit",function(){P(t);let o=c();return h(o.onEdit())}),i(1,"div")(2,"label",6),n(3,"Patient ID"),e(),d(4,"br")(5,"input",7),e(),i(6,"div")(7,"label",19),n(8,"Visit ID"),e(),d(9,"br")(10,"input",20),e(),i(11,"div")(12,"label",8),n(13,"Patient Name"),e(),d(14,"br")(15,"input",9),e(),i(16,"div")(17,"label",10),n(18,"Patient Email"),e(),d(19,"br")(20,"input",11),e(),i(21,"div")(22,"label",12),n(23,"Patient Phone"),e(),d(24,"br")(25,"input",13),e(),i(26,"div")(27,"label",14),n(28,"Patient Description"),e(),d(29,"br")(30,"textarea",15),e(),i(31,"div")(32,"button",16),n(33,"Edit Patient Record"),e(),i(34,"button",17),u("click",function(){P(t);let o=c();return h(o.deactivateEditForm())}),n(35,"cancel"),e()()()}if(r&2){let t=c();f("formGroup",t.editPatientForm),p(32),f("disabled",!t.editPatientForm.valid)}}function Q(r,x){if(r&1){let t=_();i(0,"tr")(1,"td"),n(2),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),e(),i(11,"td",21)(12,"button",22),u("click",function(){let o=P(t).$implicit,s=c();return h(s.activateEditForm(o))}),n(13,"Edit"),e(),i(14,"button",23),u("click",function(){let o=P(t).$implicit,s=c();return h(s.deleteAction(o.patientID))}),n(15,"Delete"),e()()()}if(r&2){let t=x.$implicit;p(2),b(t.patientID),p(2),b(t.patientName),p(2),b(t.patientEmail),p(2),b(t.patientPhone),p(2),b(t.patientDescription)}}var tt=(()=>{class r{constructor(t){this.dataService=t,this.AddBtnPressed=!1,this.EditBtnPressed=!1}activateForm(){this.AddBtnPressed=!0}deactivateForm(){this.AddBtnPressed=!1}onSubmit(){let t={patientID:this.addPatientForm.value.patientID,patientName:this.addPatientForm.value.patientName,patientEmail:this.addPatientForm.value.patientEmail,patientPhone:this.addPatientForm.value.patientPhone,patientDescription:this.addPatientForm.value.patientDescription},a={patientID:this.addPatientForm.value.patientID,visitID:null,patientName:this.addPatientForm.value.patientName,patientEmail:this.addPatientForm.value.patientEmail,patientPhone:this.addPatientForm.value.patientPhone,patientDescription:this.addPatientForm.value.patientDescription};this.AllPatients.some(o=>o.patientID===a.patientID)&&a.patientID!==null?alert("The patient ID you just entered already exists. Please  try a unique value for each patient"):(this.dataService.AddNewPatient(t).subscribe({next:o=>{this.AllPatients.push(a),alert("Patient Added Successfully"),console.log("Patient Added successfully")},error:o=>{alert(o)}}),this.AddBtnPressed=!1)}activateEditForm(t){let a=this.editPatientForm.get("patientID"),o=this.editPatientForm.get("visitID"),s=this.editPatientForm.get("patientName"),D=this.editPatientForm.get("patientEmail"),$=this.editPatientForm.get("patientPhone"),L=this.editPatientForm.get("patientDescription");a?.setValue(t.patientID),o?.setValue(t.visitID),s?.setValue(t.patientName),D?.setValue(t.patientEmail),$?.setValue(t.patientPhone),L?.setValue(t.patientDescription),this.EditBtnPressed=!0}deactivateEditForm(){this.EditBtnPressed=!1}onEdit(){let t={patientID:this.editPatientForm.value.patientID,visitID:this.editPatientForm.value.visitID,patientName:this.editPatientForm.value.patientName,patientEmail:this.editPatientForm.value.patientEmail,patientPhone:this.editPatientForm.value.patientPhone,patientDescription:this.editPatientForm.value.patientDescription},a=0;this.AllPatients.forEach(o=>{o.patientID===t.patientID&&(a=a+1)}),a>1&&t.visitID!==null?alert("The visit ID you just entered already exists. Please  try a unique value for each patient"):(console.log("patient ID: ",t.patientID),this.dataService.UpdatePatient(t.patientID,t).subscribe({next:o=>{let s=this.AllPatients.filter(D=>D.patientID==t.patientID)[0];s.patientID=t.patientID,s.visitID=t.visitID,s.patientName=t.patientName,s.patientEmail=t.patientEmail,s.patientPhone=t.patientPhone,s.patientDescription=t.patientDescription,alert("The record of the patient has been updated")}}),console.log("Hello world"),this.EditBtnPressed=!1)}deleteAction(t){this.dataService.deletePatientByID(t).subscribe({next:a=>{alert("deleted patient record successfully"),this.AllPatients.splice(this.AllPatients.findIndex(o=>o.patientID===t),1)}})}ngOnInit(){this.editPatientForm=new C({patientID:new m(null,[l.required]),patientName:new m("",[l.required,l.minLength(10)]),visitID:new m(null),patientEmail:new m("",[l.required,l.email,l.minLength(10)]),patientPhone:new m("",[l.required]),patientDescription:new m("")}),this.addPatientForm=new C({patientID:new m(null,[l.required]),patientName:new m("",[l.required,l.minLength(10)]),patientEmail:new m("",[l.required,l.email,l.minLength(10)]),patientPhone:new m("",[l.required]),patientDescription:new m("")}),this.dataService.getAllPatients().subscribe({next:t=>{this.AllPatients=t,this.last_id=this.AllPatients[this.AllPatients.length-1].patientID;let a=this.addPatientForm.get("patientID");console.log("Hello"),console.log(this.last_id),a?.setValue(Number(this.last_id)+1),a?.setValidators([l.required,l.min(Number(this.last_id)+1)])},error:t=>{alert(t)}})}static{this.\u0275fac=function(a){return new(a||r)(F(g))}}static{this.\u0275cmp=S({type:r,selectors:[["app-patient-dashboard"]],standalone:!0,features:[O([g]),k],decls:24,vars:2,consts:[[1,"section-title"],[1,"add-btn",3,"click"],["id","addPatientForm",1,"patient-form",3,"formGroup"],["id","editPatientForm",1,"patient-form",3,"formGroup"],[1,"patients-table"],["id","addPatientForm",1,"patient-form",3,"ngSubmit","formGroup"],["for","patientID"],["formControlName","patientID","type","number","id","patientID","name","patientID"],["for","patientName"],["formControlName","patientName","type","text","id","patientName","name","patientName"],["for","patientEmail"],["formControlName","patientEmail","type","text","id","patientEmail","name","patientEmail"],["for","patientPhone"],["formControlName","patientPhone","type","text","id","patientPhone","name","patientPhone"],["for","patientDescription"],["formControlName","patientDescription","id","patientDescription","name","patientDescription"],["type","submit",3,"disabled"],[3,"click"],["id","editPatientForm",1,"patient-form",3,"ngSubmit","formGroup"],["for","visitID"],["formControlName","visitID","type","number","id","visitID","name","visitID"],[1,"actions"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-delete",3,"click"]],template:function(a,o){a&1&&(i(0,"h2",0),n(1,"Patients"),e(),i(2,"button",1),u("click",function(){return o.activateForm()}),n(3,"+Add New Patient"),e(),w(4,J,31,2,"form",2)(5,K,36,2,"form",3),i(6,"table",4)(7,"thead")(8,"tr")(9,"th"),n(10,"Patient ID"),e(),i(11,"th"),n(12,"Patient Name"),e(),i(13,"th"),n(14,"Patient Email"),e(),i(15,"th"),n(16,"Patient Phone"),e(),i(17,"th"),n(18,"Patient Description"),e(),i(19,"th"),n(20,"Actions"),e()()(),i(21,"tbody"),y(22,Q,16,5,"tr",null,M),e()()),a&2&&(p(4),v(4,o.AddBtnPressed?4:-1),p(),v(5,o.EditBtnPressed?5:-1),p(17),N(o.AllPatients))},dependencies:[j,q,V,z,B,T,G,U],styles:[".section-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:16px;color:#333}.add-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 14px;font-size:16px;cursor:pointer;margin-bottom:20px;border-radius:4px}.add-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.patient-form[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ddd;padding:20px;margin-bottom:30px;border-radius:6px;max-width:500px}.patient-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}.patient-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:5px}.patient-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .patient-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .patient-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ccc;border-radius:4px}.patient-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 16px;margin-right:10px;border:none;border-radius:4px;font-size:14px;cursor:pointer}.patient-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.patient-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#a0d6b4;cursor:not-allowed}.patient-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){background-color:#dc3545;color:#fff}.patients-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.patients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .patients-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:12px;text-align:left}.patients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:600}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px;border-radius:4px;cursor:pointer;border:none}.btn-edit[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return r})();export{tt as a};
