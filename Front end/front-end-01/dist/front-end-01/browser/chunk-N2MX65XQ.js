import{c as _}from"./chunk-M72ULPAD.js";import{k as C,m as x,n as a,o as v,p as P,q as M,r as d,s as w,u as O,v as y,w as S}from"./chunk-MCLKDG7U.js";import{Da as p,Ja as o,Ka as i,La as g,M as u,Na as m,Pa as r,R as f,Sa as b,V as h,qa as l,ra as c}from"./chunk-U35MBERR.js";var k=(()=>{class n{constructor(e){this.http=e,this.base_url="http://localhost:49428/api/Auth/login",this.isAdmin=!1,this.isReceptionist=!1}getLoginResponse(e,t){return this.http.post(this.base_url,{email:e,password:t})}static{this.\u0275fac=function(t){return new(t||n)(f(C))}}static{this.\u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var D=(()=>{class n{constructor(e,t){this.loginServcie=e,this.router=t,this.isAdmin=!1,this.isReceptionist=!1}navigateToSignUp(){this.router.navigate(["/signup"])}ngOnInit(){this.loginForm=new M({email:new d(null,[a.required,a.email]),password:new d(null,[a.required,a.minLength(3)])})}validateUser(){this.loginServcie.getLoginResponse(this.loginForm.value.email,this.loginForm.value.password).subscribe({next:e=>{try{e?.token&&sessionStorage.setItem("access_token",e.token),e?.role&&sessionStorage.setItem("role",e.role),e?.role==="Admin"?this.router.navigate(["/admin"]):e?.role==="Receptionist"&&this.router.navigate(["/receptionist"])}catch{}this.userToken=e.token,this.loginError=e.error,this.userRole=e.role,this.userToken?alert(`login Successful as: ${this.userRole}`):alert(this.loginError),this.userRole==="Admin"&&(this.isAdmin=!0),this.userRole==="Receptionist"&&(this.isReceptionist=!0)}})}static{this.\u0275fac=function(t){return new(t||n)(c(k),c(_))}}static{this.\u0275cmp=h({type:n,selectors:[["app-login-page"]],standalone:!0,features:[b],decls:14,vars:2,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["for","username"],["type","text","id","username","placeholder","Enter username","formControlName","email"],["for","password"],["type","password","id","password","placeholder","Enter password","formControlName","password"],["type","submit",3,"disabled"],[3,"click"]],template:function(t,s){t&1&&(o(0,"div",0)(1,"h2"),r(2,"Login"),i(),o(3,"form",1),m("ngSubmit",function(){return s.validateUser()}),o(4,"label",2),r(5,"Username"),i(),g(6,"input",3),o(7,"label",4),r(8,"Password"),i(),g(9,"input",5),o(10,"button",6),r(11,"Login"),i()(),o(12,"a",7),m("click",function(){return s.navigateToSignUp()}),r(13,"Sign Up"),i()()),t&2&&(l(3),p("formGroup",s.loginForm),l(7),p("disabled",!s.loginForm.valid))},dependencies:[S,w,x,v,P,O,y],styles:["body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f0f2f5;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}.login-container[_ngcontent-%COMP%]{background-color:#fff;margin:auto;padding:40px 30px;border-radius:10px;box-shadow:0 8px 16px #0000001a;width:100%;max-width:400px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center;color:#333}.login-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#555}.login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 10px;margin-bottom:20px;border:1px solid #ccc;border-radius:6px;font-size:16px;transition:border .3s}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;border:none;color:#fff;font-size:16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-container[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#a0c4ff;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:20px;color:#007bff;text-decoration:none;font-weight:500;cursor:pointer}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();export{D as a};
