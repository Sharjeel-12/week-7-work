import{k as A,m as V,n as d,o as z,p as B,q as E,r as s,s as T,t as q,u as G,v as U,w as j}from"./chunk-MCLKDG7U.js";import{Ba as w,Da as f,Fa as C,Ga as M,Ha as y,Ia as O,Ja as o,Ka as e,La as l,M as I,Ma as g,Na as p,Oa as u,Pa as r,Qa as b,R as P,Ra as N,Sa as k,V as S,ba as D,ca as h,qa as m,ra as F}from"./chunk-U35MBERR.js";var _=(()=>{class c{constructor(t){this.http=t,this.baseUrl="http://localhost:49428/api/Doctors"}getAllDoctors(){return this.http.get(this.baseUrl,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}getDoctorByID(t){return this.http.get(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}deleteDoctorByID(t){return this.http.delete(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}AddNewDoctor(t){return this.http.post(this.baseUrl,t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}UpdateDoctor(t,i){return this.http.put(this.baseUrl+`/${t}`,i,{headers:{Authorization:"Bearer "+sessionStorage.getItem("access_token")}})}static{this.\u0275fac=function(i){return new(i||c)(P(A))}}static{this.\u0275prov=I({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();function J(c,x){if(c&1){let t=g();o(0,"form",4),p("ngSubmit",function(){D(t);let n=u();return h(n.onSubmit())}),o(1,"div")(2,"label",5),r(3,"Doctor ID"),e(),l(4,"br")(5,"input",6),e(),o(6,"div")(7,"label",7),r(8,"Doctor Name"),e(),l(9,"br")(10,"input",8),e(),o(11,"div")(12,"label",9),r(13,"Doctor Email"),e(),l(14,"br")(15,"input",10),e(),o(16,"div")(17,"label",11),r(18,"Doctor Phone"),e(),l(19,"br")(20,"input",12),e(),o(21,"div")(22,"label",13),r(23,"Doctor Description"),e(),l(24,"br")(25,"textarea",14),e(),o(26,"div")(27,"button",15),r(28,"Add Doctor"),e(),o(29,"button",16),p("click",function(){D(t);let n=u();return h(n.deactivateForm())}),r(30,"cancel"),e()()()}if(c&2){let t=u();f("formGroup",t.addDoctorForm),m(27),f("disabled",!t.addDoctorForm.valid)}}function K(c,x){if(c&1){let t=g();o(0,"form",17),p("ngSubmit",function(){D(t);let n=u();return h(n.onEdit())}),o(1,"div")(2,"label",5),r(3,"Doctor ID"),e(),l(4,"br")(5,"input",6),e(),o(6,"div")(7,"label",18),r(8,"Visit ID"),e(),l(9,"br")(10,"input",19),e(),o(11,"div")(12,"label",7),r(13,"Doctor Name"),e(),l(14,"br")(15,"input",8),e(),o(16,"div")(17,"label",9),r(18,"Doctor Email"),e(),l(19,"br")(20,"input",10),e(),o(21,"div")(22,"label",11),r(23,"Doctor Phone"),e(),l(24,"br")(25,"input",12),e(),o(26,"div")(27,"label",13),r(28,"Doctor Description"),e(),l(29,"br")(30,"textarea",14),e(),o(31,"div")(32,"button",15),r(33,"Edit Doctor Details"),e(),o(34,"button",16),p("click",function(){D(t);let n=u();return h(n.deactivateForm())}),r(35,"cancel"),e()()()}if(c&2){let t=u();f("formGroup",t.editDoctorForm),m(32),f("disabled",!t.editDoctorForm.valid)}}function Q(c,x){if(c&1){let t=g();o(0,"tr")(1,"td"),r(2),e(),o(3,"td"),r(4),e(),o(5,"td"),r(6),e(),o(7,"td"),r(8),e(),o(9,"td"),r(10),e(),o(11,"td",20)(12,"button",21),p("click",function(){let n=D(t).$implicit,a=u();return h(a.activateEditForm(n))}),r(13,"Edit"),e(),o(14,"button",22),p("click",function(){let n=D(t).$implicit,a=u();return h(a.deleteAction(n.doctorID))}),r(15,"Delete"),e()()()}if(c&2){let t=x.$implicit;m(2),b(t.doctorID),m(2),b(t.doctorName),m(2),b(t.doctorEmail),m(2),b(t.doctorPhone),m(2),b(t.specialization)}}var tt=(()=>{class c{constructor(t){this.dataService=t,this.AddBtnPressed=!1,this.EditBtnPressed=!1}activateForm(){this.AddBtnPressed=!0}deactivateForm(){this.AddBtnPressed=!1}onSubmit(){let t={doctorID:this.addDoctorForm.value.doctorID,doctorName:this.addDoctorForm.value.doctorName,doctorEmail:this.addDoctorForm.value.doctorEmail,doctorPhone:this.addDoctorForm.value.doctorPhone,specialization:this.addDoctorForm.value.specialization},i={doctorID:this.addDoctorForm.value.doctorID,visitID:null,doctorName:this.addDoctorForm.value.doctorName,doctorEmail:this.addDoctorForm.value.doctorEmail,doctorPhone:this.addDoctorForm.value.doctorPhone,specialization:this.addDoctorForm.value.specialization};this.AllDoctors.some(n=>n.doctorID===i.doctorID)&&i.doctorID!==null?alert("The doctor ID you just entered already exists. Please  try a unique value for each patient"):(this.dataService.AddNewDoctor(t).subscribe({next:n=>{this.AllDoctors.push(i),alert("Doctor Added Successfully"),console.log("Doctor Added successfully")},error:n=>{alert(n)}}),this.AddBtnPressed=!1)}activateEditForm(t){let i=this.editDoctorForm.get("doctorID"),n=this.editDoctorForm.get("visitID"),a=this.editDoctorForm.get("doctorName"),v=this.editDoctorForm.get("doctorEmail"),$=this.editDoctorForm.get("doctorPhone"),L=this.editDoctorForm.get("specialization");i?.setValue(t.doctorID),n?.setValue(t.visitID),a?.setValue(t.doctorName),v?.setValue(t.doctorEmail),$?.setValue(t.doctorPhone),L?.setValue(t.specialization),this.EditBtnPressed=!0}deactivateEditForm(){this.EditBtnPressed=!1}onEdit(){let t={doctorID:this.editDoctorForm.value.doctorID,visitID:this.editDoctorForm.value.visitID,doctorName:this.editDoctorForm.value.doctorName,doctorEmail:this.editDoctorForm.value.doctorEmail,doctorPhone:this.editDoctorForm.value.doctorPhone,specialization:this.editDoctorForm.value.specialization},i=0;this.AllDoctors.forEach(n=>{n.doctorID===t.doctorID&&(i=i+1)}),i>1&&t.visitID!==null?alert("The visit ID you just entered already exists. Please  try a unique value for each patient"):(console.log("doctor ID: ",t.doctorID),this.dataService.UpdateDoctor(t.doctorID,t).subscribe({next:n=>{let a=this.AllDoctors.filter(v=>v.doctorID==t.doctorID)[0];a.doctorID=t.doctorID,a.visitID=t.visitID,a.doctorName=t.doctorName,a.doctorEmail=t.doctorEmail,a.doctorPhone=t.doctorPhone,a.specialization=t.specialization,alert("The record of the doctor has been updated")}}),console.log("Hello world"),this.EditBtnPressed=!1)}deleteAction(t){console.log(t),this.dataService.deleteDoctorByID(t).subscribe({next:i=>{alert("deleted patient record successfully"),this.AllDoctors.splice(this.AllDoctors.findIndex(n=>n.doctorID===t),1)}})}ngOnInit(){this.editDoctorForm=new E({doctorID:new s(null,[d.required]),doctorName:new s("",[d.required,d.minLength(10)]),visitID:new s(null),doctorEmail:new s("",[d.required,d.email,d.minLength(10)]),doctorPhone:new s("",[d.required]),specialization:new s("")}),this.addDoctorForm=new E({doctorID:new s(null,[d.required]),doctorName:new s("",[d.required,d.minLength(10)]),doctorEmail:new s("",[d.required,d.email,d.minLength(10)]),doctorPhone:new s("",[d.required]),specialization:new s("")}),this.dataService.getAllDoctors().subscribe({next:t=>{this.AllDoctors=t,this.last_id=this.AllDoctors[this.AllDoctors.length-1].doctorID;let i=this.addDoctorForm.get("doctorID");console.log("Hello"),console.log(this.last_id),i?.setValue(Number(this.last_id)+1),i?.setValidators([d.required,d.min(Number(this.last_id)+1)])},error:t=>{alert("Failed to load doctor data")}})}static{this.\u0275fac=function(i){return new(i||c)(F(_))}}static{this.\u0275cmp=S({type:c,selectors:[["app-doctor-dashboard"]],standalone:!0,features:[N([_]),k],decls:24,vars:2,consts:[[1,"add-btn",3,"click"],["id","addDoctorForm",1,"doctor-form",3,"formGroup"],["id","editDoctorForm",1,"doctor-form",3,"formGroup"],[1,"doctors-table"],["id","addDoctorForm",1,"doctor-form",3,"ngSubmit","formGroup"],["for","doctorID"],["formControlName","doctorID","type","number","id","doctorID","name","doctorID"],["for","doctorName"],["formControlName","doctorName","type","text","id","doctorName","name","doctorName"],["for","doctorEmail"],["formControlName","doctorEmail","type","text","id","doctorEmail","name","doctorEmail"],["for","doctorPhone"],["formControlName","doctorPhone","type","text","id","doctorPhone","name","doctorPhone"],["for","specialization"],["formControlName","specialization","id","specialization","name","specialization"],["type","submit",3,"disabled"],[3,"click"],["id","editDoctorForm",1,"doctor-form",3,"ngSubmit","formGroup"],["for","visitID"],["formControlName","visitID","type","number","id","visitID","name","visitID"],[1,"actions"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-delete",3,"click"]],template:function(i,n){i&1&&(o(0,"h2"),r(1,"Doctors"),e(),o(2,"button",0),p("click",function(){return n.activateForm()}),r(3,"+Add New Doctor"),e(),w(4,J,31,2,"form",1)(5,K,36,2,"form",2),o(6,"table",3)(7,"thead")(8,"tr")(9,"th"),r(10,"Doctor ID"),e(),o(11,"th"),r(12,"Doctor Name"),e(),o(13,"th"),r(14,"Doctor Email"),e(),o(15,"th"),r(16,"Doctor Phone"),e(),o(17,"th"),r(18,"Doctor Description"),e(),o(19,"th"),r(20,"Actions"),e()()(),o(21,"tbody"),y(22,Q,16,5,"tr",null,M),e()()),i&2&&(m(4),C(4,n.AddBtnPressed?4:-1),m(),C(5,n.EditBtnPressed?5:-1),m(17),O(n.AllDoctors))},dependencies:[j,T,V,q,z,B,G,U],styles:[".section-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:16px;color:#333}.add-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 14px;font-size:16px;cursor:pointer;margin-bottom:20px;border-radius:4px}.add-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.doctor-form[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ddd;padding:20px;margin-bottom:30px;border-radius:6px;max-width:500px}.doctor-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}.doctor-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:5px}.doctor-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .doctor-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .doctor-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ccc;border-radius:4px}.doctor-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 16px;margin-right:10px;border:none;border-radius:4px;font-size:14px;cursor:pointer}.doctor-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.doctor-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#a0d6b4;cursor:not-allowed}.doctor-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2), .doctor-form[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.doctors-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.doctors-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .doctors-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:12px;text-align:left}.doctors-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:600}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px;border-radius:4px;cursor:pointer;border:none}.btn-edit[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return c})();export{tt as a};
